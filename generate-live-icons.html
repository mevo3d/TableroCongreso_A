<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Generador de Íconos LIVE</title>
</head>
<body>
    <h1>Generador de Íconos para Streaming LIVE</h1>
    <p>Este archivo genera los íconos con el badge LIVE para la PWA</p>
    
    <canvas id="canvas"></canvas>
    
    <div id="downloads"></div>
    
    <script>
        // Tamaños de íconos necesarios para PWA
        const sizes = [72, 96, 128, 144, 152, 180, 192, 384, 512];
        
        // Cargar el logo secundario
        const logoImg = new Image();
        logoImg.crossOrigin = "anonymous";
        logoImg.onload = function() {
            generateIcons();
        };
        logoImg.src = '/uploads/logo-secundario.png';
        
        function generateIcons() {
            const downloadsDiv = document.getElementById('downloads');
            
            sizes.forEach(size => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = size;
                canvas.height = size;
                
                // Fondo blanco circular
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(size/2, size/2, size/2, 0, Math.PI * 2);
                ctx.fill();
                
                // Dibujar el logo centrado (80% del tamaño)
                const logoSize = size * 0.8;
                const logoX = (size - logoSize) / 2;
                const logoY = (size - logoSize) / 2;
                ctx.drawImage(logoImg, logoX, logoY, logoSize, logoSize);
                
                // Badge LIVE en la esquina superior derecha
                const badgeSize = size * 0.35;
                const badgeX = size - badgeSize - (size * 0.05);
                const badgeY = size * 0.05;
                
                // Sombra del badge
                ctx.shadowColor = 'rgba(0,0,0,0.3)';
                ctx.shadowBlur = size * 0.02;
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = size * 0.01;
                
                // Fondo del badge LIVE (rojo)
                ctx.fillStyle = '#FF0000';
                ctx.beginPath();
                ctx.roundRect(badgeX, badgeY, badgeSize, badgeSize * 0.4, size * 0.05);
                ctx.fill();
                
                // Resetear sombra
                ctx.shadowColor = 'transparent';
                ctx.shadowBlur = 0;
                
                // Punto parpadeante
                ctx.fillStyle = '#FFFFFF';
                ctx.beginPath();
                ctx.arc(badgeX + badgeSize * 0.15, badgeY + badgeSize * 0.2, size * 0.03, 0, Math.PI * 2);
                ctx.fill();
                
                // Texto LIVE
                ctx.fillStyle = '#FFFFFF';
                ctx.font = `bold ${size * 0.08}px -apple-system, BlinkMacSystemFont, 'SF Pro Display', Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('LIVE', badgeX + badgeSize * 0.6, badgeY + badgeSize * 0.2);
                
                // Crear enlace de descarga
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const link = document.createElement('a');
                    link.href = url;
                    link.download = `icon-live-${size}.png`;
                    link.textContent = `Descargar icon-live-${size}.png`;
                    link.style.display = 'block';
                    link.style.margin = '10px';
                    downloadsDiv.appendChild(link);
                    
                    // Mostrar preview
                    const img = document.createElement('img');
                    img.src = url;
                    img.style.width = '100px';
                    img.style.margin = '10px';
                    img.style.border = '1px solid #ccc';
                    downloadsDiv.appendChild(img);
                });
            });
        }
        
        // Polyfill para roundRect si no existe
        if (!CanvasRenderingContext2D.prototype.roundRect) {
            CanvasRenderingContext2D.prototype.roundRect = function(x, y, w, h, r) {
                if (w < 2 * r) r = w / 2;
                if (h < 2 * r) r = h / 2;
                this.beginPath();
                this.moveTo(x + r, y);
                this.arcTo(x + w, y, x + w, y + h, r);
                this.arcTo(x + w, y + h, x, y + h, r);
                this.arcTo(x, y + h, x, y, r);
                this.arcTo(x, y, x + w, y, r);
                this.closePath();
                return this;
            }
        }
    </script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', Arial;
            padding: 20px;
            background: #f0f0f0;
        }
        
        #downloads {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        #downloads a {
            text-decoration: none;
            color: #007AFF;
            font-size: 12px;
        }
        
        #downloads img {
            display: block;
        }
        
        canvas {
            display: none;
        }
    </style>
</body>
</html>